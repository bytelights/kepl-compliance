<div class="page-wrapper">
  <div class="page-container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Reports & Export</h1>
      <p class="page-subtitle">Export compliance data and analytics</p>
    </div>

    <!-- Date Filter Card -->
    <mat-card class="content-card filter-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>date_range</mat-icon>
          Date Range Filter
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="dateFilterForm" class="date-filter-form">
          <mat-form-field appearance="outline">
            <mat-label>Start Date</mat-label>
            <input
              matInput
              [matDatepicker]="startPicker"
              formControlName="startDate"
              placeholder="Select start date"
            >
            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>End Date</mat-label>
            <input
              matInput
              [matDatepicker]="endPicker"
              formControlName="endDate"
              placeholder="Select end date"
            >
            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
          </mat-form-field>

          <button mat-button (click)="clearDateFilter()">
            <mat-icon>clear</mat-icon>
            Clear
          </button>
        </form>
      </mat-card-content>
    </mat-card>

    <!-- Report Cards Grid -->
    <div class="reports-grid">
      <!-- Compliance Summary -->
      <mat-card class="report-card">
        <mat-card-content>
          <div class="report-icon-wrapper primary">
            <mat-icon>assignment</mat-icon>
          </div>
          <h2>Compliance Summary</h2>
          <p>Comprehensive report of all compliance tasks including status, deadlines, and owners</p>
          <ul class="report-features">
            <li>All task details</li>
            <li>Entity and department breakdown</li>
            <li>Owner and reviewer information</li>
          </ul>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-raised-button
            color="primary"
            (click)="exportComplianceSummary()"
            [disabled]="exporting.compliance"
          >
            <mat-icon>file_download</mat-icon>
            <span *ngIf="!exporting.compliance">Export CSV</span>
            <span *ngIf="exporting.compliance">Exporting...</span>
          </button>
        </mat-card-actions>
      </mat-card>

      <!-- Department Report -->
      <mat-card class="report-card">
        <mat-card-content>
          <div class="report-icon-wrapper success">
            <mat-icon>corporate_fare</mat-icon>
          </div>
          <h2>Department-Wise</h2>
          <p>Statistical analysis of compliance performance by department with completion rates</p>
          <ul class="report-features">
            <li>Total tasks per department</li>
            <li>Completed vs pending breakdown</li>
            <li>Compliance rate percentage</li>
          </ul>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-raised-button
            color="primary"
            (click)="exportDepartmentReport()"
            [disabled]="exporting.department"
          >
            <mat-icon>file_download</mat-icon>
            <span *ngIf="!exporting.department">Export CSV</span>
            <span *ngIf="exporting.department">Exporting...</span>
          </button>
        </mat-card-actions>
      </mat-card>

      <!-- Overdue Tasks -->
      <mat-card class="report-card">
        <mat-card-content>
          <div class="report-icon-wrapper danger">
            <mat-icon>warning</mat-icon>
          </div>
          <h2>Overdue Tasks</h2>
          <p>Detailed list of all overdue pending tasks with days overdue and impact level</p>
          <ul class="report-features">
            <li>All pending overdue tasks</li>
            <li>Days overdue calculation</li>
            <li>Owner contact information</li>
          </ul>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-raised-button
            color="primary"
            (click)="exportOverdueTasks()"
            [disabled]="exporting.overdue"
          >
            <mat-icon>file_download</mat-icon>
            <span *ngIf="!exporting.overdue">Export CSV</span>
            <span *ngIf="exporting.overdue">Exporting...</span>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Info Card -->
    <mat-card class="help-card">
      <mat-card-content>
        <div class="help-content">
          <mat-icon>info</mat-icon>
          <div>
            <h3>Report Information</h3>
            <p>
              All reports are exported in CSV format and can be opened in Excel, Google Sheets, or any spreadsheet application.
              Reports include all data visible to your role (Admin/Reviewer).
            </p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
